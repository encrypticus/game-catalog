{"ast":null,"code":"function _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { rawgConnector } from '../../utils/rawg-connector';\nexport default (async (req, res) => {\n  const _req$body = req.body,\n        {\n    search\n  } = _req$body,\n        options = _objectWithoutProperties(_req$body, [\"search\"]);\n\n  const perPage = 20;\n\n  try {\n    const gamesData = await rawgConnector.getGamesData({\n      search,\n      options\n    });\n    const count = await gamesData.count;\n    const maxPage = Math.ceil(count / perPage);\n    res.statusCode = 200;\n    res.json({\n      gamesData,\n      page: options.page,\n      maxPage,\n      options\n    });\n  } catch ({\n    message\n  }) {\n    console.log(message);\n  }\n});","map":{"version":3,"sources":["D:/MyProjects/game-catalog/pages/api/games.js"],"names":["rawgConnector","req","res","body","search","options","perPage","gamesData","getGamesData","count","maxPage","Math","ceil","statusCode","json","page","message","console","log"],"mappings":";;;;AAAA,SAASA,aAAT,QAA8B,4BAA9B;AAEA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACjC,oBAA+BD,GAAG,CAACE,IAAnC;AAAA,QAAM;AAAEC,IAAAA;AAAF,GAAN;AAAA,QAAmBC,OAAnB;;AACA,QAAMC,OAAO,GAAG,EAAhB;;AAEA,MAAI;AACF,UAAMC,SAAS,GAAG,MAAMP,aAAa,CAACQ,YAAd,CAA2B;AAAEJ,MAAAA,MAAF;AAAUC,MAAAA;AAAV,KAA3B,CAAxB;AACA,UAAMI,KAAK,GAAG,MAAMF,SAAS,CAACE,KAA9B;AACA,UAAMC,OAAO,GAAGC,IAAI,CAACC,IAAL,CAAUH,KAAK,GAAGH,OAAlB,CAAhB;AACAJ,IAAAA,GAAG,CAACW,UAAJ,GAAiB,GAAjB;AACAX,IAAAA,GAAG,CAACY,IAAJ,CAAS;AACPP,MAAAA,SADO;AAEPQ,MAAAA,IAAI,EAAEV,OAAO,CAACU,IAFP;AAGPL,MAAAA,OAHO;AAIPL,MAAAA;AAJO,KAAT;AAMD,GAXD,CAWE,OAAO;AAAEW,IAAAA;AAAF,GAAP,EAAoB;AACpBC,IAAAA,OAAO,CAACC,GAAR,CAAYF,OAAZ;AACD;AACF,CAlBD","sourcesContent":["import { rawgConnector } from '../../utils/rawg-connector';\r\n\r\nexport default async (req, res) => {\r\n  const { search, ...options } = req.body;\r\n  const perPage = 20;\r\n\r\n  try {\r\n    const gamesData = await rawgConnector.getGamesData({ search, options });\r\n    const count = await gamesData.count;\r\n    const maxPage = Math.ceil(count / perPage);\r\n    res.statusCode = 200;\r\n    res.json({\r\n      gamesData,\r\n      page: options.page,\r\n      maxPage,\r\n      options,\r\n    });\r\n  } catch ({ message }) {\r\n    console.log(message);\r\n  }\r\n};\r\n"]},"metadata":{},"sourceType":"module"}